# Minecraft Server - Linux

Dieser Eintrag beschreibt den Vorgang einer Minecraft Server Installation auf einen Linux Server. Zusätzlich wird eine Weboberfläche installiert welche die Verwaltung der Server vereinfacht.

#### Vorbereitung

- Virtuelle Maschine mit mindestens 2 Kernen, 4GB Arbeitsspeicher und 16GB Speicher
- Debian ISO. Diese kann auf der Offiziellen Seiten bezogen werden. [Debian -- Debian bekommen](https://www.debian.org/distrib/)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/JtXimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/JtXimage.png)

#### Installation des Betriebsystems

Die Installation von Debian erfolgt nach der geführten Installation. Dabei sind nur einige wenige Standardänderungen anzupassen.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/W7Jimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/W7Jimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/DeTimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/DeTimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/3bsimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/3bsimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/iERimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/iERimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/lpgimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/lpgimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/ScHimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/ScHimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/P2Pimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/P2Pimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/BgZimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/BgZimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/PJnimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/PJnimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/vIQimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/vIQimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/jmJimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/jmJimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/OQmimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/OQmimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/jXCimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/jXCimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/blEimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/blEimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/UTOimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/UTOimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/lnSimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/lnSimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/TXaimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/TXaimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/W9kimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/W9kimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/9zMimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/9zMimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/cmFimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/cmFimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/gkximage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/gkximage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/QdGimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/QdGimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/cIKimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/cIKimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/Vskimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/Vskimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/xGtimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/xGtimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/GJuimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/GJuimage.png)

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/cMaimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/cMaimage.png)

#### Installation von Docker und Portainer

Nach der Anmeldung mit dem root User kann zunächst einmal die Installation auf Update überprüft werden. Dies kann mit folgenden Befehlen erfolgen:  
  
Installation von sudo:

```
apt install sudo
```

Hinzufügen des zweiten angelegten Accounts in der sudors Datei:

```
adduser calma-media sudo
```

Zum zweiten Benutzer wechseln:

```
su calma-media
```

Debian Librarys Updaten

```
sudu apt update
```

```
sudo apt upgrade
```

Ist das abgeschlossen kann mit der Installation von Docker begonnen werden. Alle weiteren Installationen und Konfiguartion werden mit dem Zweiten User Account durchgeführt.

```
sudo apt install docker.io
```

```
sudo systemctl start docker
```

Anschließend kann Portainer installiert werden.

```
sudo docker run -d -p 8000:8000 -p 9000:9000 -p 9443:9443 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest
```

Anschließend ist Portainer per IP der VM und den Port 9443 erreichbar. Auf der Startseite kann hier der Username und das Passwort gesetzt werden.

Ist die IP Adresse nicht bekannt, da bei der Einrichtung auf DHCP gesetzt worden ist, kann per folgendem Befehl die Adresse ausgegeben werden:

```
sudo ip ad
```

#### [![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/OQlimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/OQlimage.png)  
Installation des Crafty Containers

  
Nach der Anmeldung kann man über "Home" auf "Live connect" klicken.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/P0cimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/P0cimage.png)  
Hier sieht man eine Übersicht der angelegten Stacks, Container, Images, Volumes und Networks.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/F8Aimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/F8Aimage.png)  
Um einen Crafty Container anzulegen wechseln wir zu "Stacks" und anschließnd auf "+ Add Stack"

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/1buimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/1buimage.png)  
Hier kann ein Crafty Container mit folgenden Compose angelegt werden.

```
version: '3'

services:
  crafty:
    container_name: crafty
    image: registry.gitlab.com/crafty-controller/crafty-4:latest
    restart: always
    environment:
        - TZ=Europe/Berlin
    ports:
        - "8080:8080" # HTTP
        - "8443:8443" # HTTPS
        - "8123:8123" # DYNMAP
        - "25500-25600:25500-25600" # MC SERV PORT RANGE
    volumes:
        - ./docker/backups:/crafty/backups
        - ./docker/logs:/crafty/logs
        - ./docker/servers:/crafty/servers
        - ./docker/config:/crafty/app/config
        - ./docker/import:/crafty/import
```

Der Titel des Compose kann bei Name eingetragen werden. Im Webeditor der obenstehende Code. Ports können nach belieben angepasst werden.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/3PZimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/3PZimage.png)  
Hat man einen Namen gegeben und den Code eingetragen kann man auf "Deploy the Stack" klicken.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/S5simage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/S5simage.png)  
Nach dem erfolgreichen Deployen müssen zunächst die Zugangsdaten des Crafty Containers auf der default-creds.txt entnommen werden. Diese können wieder über die CLI des Servers entnommen werden.

Dazu werden zunächst alle Docker Container ausgegeben.

```
sudo docker ps
```

Gesucht wird nach "registry.gitlab.com/crafty-controller/crafty-4:latest". Davon benötigen wir die Container ID  
  
[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/NJvimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/NJvimage.png)  
Anschließend können wir uns in die CLI des Containers schalten,

```
docker exec -it 57a199004f3d /bin/bash
```

und die .txt aufrufen.

```
cat app/config/default-creds.txt
```

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/sEximage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/sEximage.png)  
Hat man das Passwort herauskopiert kann man sich nun auf die Benutzeroberfläche schalten. Hier wird https://\[server-ip\]:\[crafty-https-port\] genutzt.

#### ![fqdimage.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/vHXfqdimage.png)

#### Einrichten des ersten Servers

Nach einem Erfolgreichen Login sieht man bereits die Oberfläche.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/Wuaimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/Wuaimage.png)  
Hier können über "Servers" und "Create New Server" neue Server angelegt werden.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/TNiimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/TNiimage.png)  
Hier sind die Standardeinstellungen für einen Vanilla Server. Ram kann je nach eingebauten Ram verteilt werden.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/rbKimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/rbKimage.png)  
Mit einem Klick auf "Server erstellen!" wird der Server schlussendlich erstellt.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/UZjimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/UZjimage.png)  
Nach dem der Server erstellt worden ist, wird man zurück auf das Dashboard geworfen. Hier kann man den Server zum ersten mal starten. Das akzeptieren der Minecraft EULA ist bei dem Start des Servers notwendig.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/iz0image.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/iz0image.png)  
  
Fertig. Der Server ist nun über die Minecraft Installation erreichbar. Dazu ist einfach nur die IP des Servers zu hinterlegen. In manchen Fällen mit dem Zusatz des Ports.

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/Yisimage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/Yisimage.png)  
Über "Server" -&gt; "\[Servername\]" können Logs angeschaut und weitere Einstellungen angepasst werden. Die server.properties kann über Dateien aufgerufen und direkt auf der Weboberfläche bearbeitet werden. Hier können Einstellungen wie Schwierigkeit, das Verwenden einer Whiteliste oder auch Serverbeschreibung angepasst werden. Eine genauere Erläuterung zur "server.properties" findest du in dem Eintrag [Minecraft Server - Win... | Wikimedia (calma-media.com)](https://bookstack.calma-media.com/books/minecraft-server/page/minecraft-server-windows#bkmrk-server.properties) .

[![image.png](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/scaled-1680-/U0Ximage.png)](https://bookstack.calma-media.com/uploads/images/gallery/2024-04/U0Ximage.png)